<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit User</title>
    <link rel="stylesheet" href="style.css">

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js"></script>
</head>
<body>

    <div class="container">
        <h2>Edit User</h2>

        <div class="input-box">
            <label>Enter User ID:</label>
            <input type="text" id="userIdInput" placeholder="User Firestore ID">
            <button onclick="loadUser()">Load User</button>
        </div>

        <hr>

        <div id="editSection" style="display:none;">

            <div class="input-box">
                <label>Name</label>
                <input type="text" id="editName">
            </div>

            <div class="input-box">
                <label>Email</label>
                <input type="text" id="editEmail">
            </div>

            <div class="input-box">
                <label>Phone</label>
                <input type="text" id="editPhone">
            </div>

            <div class="input-box">
                <label>Balance</label>
                <input type="number" id="editBalance">
            </div>

            <button onclick="updateUser()">Update User</button>
        </div>
    </div>


<script>
// -----------------------------------------
// ðŸ”¥ Firebase Config
// -----------------------------------------
const firebaseConfig = {
    apiKey: "YOUR-API-KEY",
    authDomain: "YOUR-FIREBASE-DOMAIN",
    projectId: "YOUR-PROJECT-ID",
    storageBucket: "YOUR-BUCKET",
    messagingSenderId: "YOUR-SENDER-ID",
    appId: "YOUR-APP-ID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();


// -----------------------------------------
// ðŸ”¹ User Load by ID
// -----------------------------------------
function loadUser() {
    let uid = document.getElementById("userIdInput").value;

    if (uid === "") {
        alert("Please enter a User ID");
        return;
    }

    db.collection("users").doc(uid).get().then(doc => {
        if (!doc.exists) {
            alert("User not found!");
            return;
        }

        const data = doc.data();

        document.getElementById("editName").value = data.name || "";
        document.getElementById("editEmail").value = data.email || "";
        document.getElementById("editPhone").value = data.phone || "";
        document.getElementById("editBalance").value = data.balance || 0;

        document.getElementById("editSection").style.display = "block";
    });
}


// -----------------------------------------
// ðŸ”¹ Update User
// -----------------------------------------
function updateUser() {
    let uid = document.getElementById("userIdInput").value;

    const updatedData = {
        name: document.getElementById("editName").value,
        email: document.getElementById("editEmail").value,
        phone: document.getElementById("editPhone").value,
        balance: Number(document.getElementById("editBalance").value)
    };

    db.collection("users").doc(uid)
        .update(updatedData)
        .then(() => {
            alert("User updated successfully!");
        })
        .catch(error => {
            alert("Error updating user: " + error);
        });
}
</script>

</body>
</html>
